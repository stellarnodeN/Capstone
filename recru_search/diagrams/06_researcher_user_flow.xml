<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="5.0" etag="xxx" version="22.1.16" type="device">
  <diagram name="06. Researcher User Flow" id="researcher-user-flow">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1600" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="06. Researcher User Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="20" width="500" height="30" as="geometry" />
        </mxCell>
        
        <!-- Start -->
        <mxCell id="start" value="START" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579b;" vertex="1" parent="1">
          <mxGeometry x="400" y="80" width="80" height="40" as="geometry" />
        </mxCell>
        
        <!-- Connect Wallet -->
        <mxCell id="connect-wallet" value="Connect Wallet&#xa;(Solana)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;" vertex="1" parent="1">
          <mxGeometry x="350" y="140" width="180" height="60" as="geometry" />
        </mxCell>
        
        <!-- Create Study -->
        <mxCell id="create-study" value="Create Study&#xa;• Define study parameters&#xa;• Set enrollment periods&#xa;• Specify reward amount&#xa;• Set max participants" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;" vertex="1" parent="1">
          <mxGeometry x="350" y="220" width="180" height="100" as="geometry" />
        </mxCell>
        
        <!-- Study Validation -->
        <mxCell id="study-validation" value="Study Validation" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#e65100;" vertex="1" parent="1">
          <mxGeometry x="380" y="340" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- Publish Study -->
        <mxCell id="publish-study" value="Publish Study&#xa;• Study becomes visible&#xa;• Participants can enroll&#xa;• Status: Published" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;" vertex="1" parent="1">
          <mxGeometry x="350" y="440" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Create Reward Vault -->
        <mxCell id="create-vault" value="Create Reward Vault&#xa;• Fund with tokens&#xa;• Set up escrow&#xa;• Lock rewards" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;" vertex="1" parent="1">
          <mxGeometry x="350" y="540" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Monitor Study -->
        <mxCell id="monitor-study" value="Monitor Study&#xa;• Track enrollment&#xa;• Monitor submissions&#xa;• View analytics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;" vertex="1" parent="1">
          <mxGeometry x="350" y="640" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Close Study -->
        <mxCell id="close-study" value="Close Study&#xa;• Stop new enrollments&#xa;• Status: Closed&#xa;• Archive study" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;" vertex="1" parent="1">
          <mxGeometry x="350" y="740" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Archive Study -->
        <mxCell id="archive-study" value="Archive Study&#xa;• Finalize study data&#xa;• Generate reports&#xa;• Complete study lifecycle" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;" vertex="1" parent="1">
          <mxGeometry x="350" y="840" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Success State -->
        <mxCell id="success" value="SUCCESS" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;" vertex="1" parent="1">
          <mxGeometry x="400" y="940" width="80" height="40" as="geometry" />
        </mxCell>
        

        
        <!-- Flowchart Arrow -->
        <mxCell id="arrow1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="start" target="connect-wallet">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="connect-wallet" target="create-study">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow3a" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="create-study" target="study-validation">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="study-validation" target="publish-study">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="publish-study" target="create-vault">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="create-vault" target="monitor-study">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="monitor-study" target="close-study">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="close-study" target="archive-study">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="archive-study" target="success">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        

        
        <!-- Study Parameters -->
        <mxCell id="study-params" value="Study Parameters:&#xa;• study_id: Unique identifier&#xa;• title & description&#xa;• enrollment_start/end&#xa;• data_collection_end&#xa;• max_participants&#xa;• reward_amount_per_participant&#xa;• status: Draft" style="text;html=1;strokeColor=none;fillColor=#f0f8ff;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="600" y="120" width="280" height="100" as="geometry" />
        </mxCell>
        
        <!-- Validation Rules -->
        <mxCell id="validation-rules" value="Validation Rules:&#xa;• enrollment_start > current_time&#xa;• enrollment_end > enrollment_start&#xa;• data_collection_end > enrollment_end&#xa;• max_participants > 0&#xa;• reward_amount > 0" style="text;html=1;strokeColor=none;fillColor=#fff8e1;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="600" y="240" width="280" height="120" as="geometry" />
        </mxCell>
        
        <!-- Reward Vault Details -->
        <mxCell id="vault-details" value="Reward Vault Setup:&#xa;• Initial deposit >= total_reward_needed&#xa;• total_reward = reward_amount * max_participants&#xa;• Tokens transferred to vault PDA&#xa;• Automated distribution to participants" style="text;html=1;strokeColor=none;fillColor=#fff8e1;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="600" y="380" width="280" height="120" as="geometry" />
        </mxCell>
        
        <!-- Study Lifecycle -->
        <mxCell id="lifecycle" value="Study Lifecycle:&#xa;• Draft → Published → Active → Closed → Archived&#xa;• Published: Participants can enroll&#xa;• Active: Data collection period&#xa;• Closed: No new enrollments&#xa;• Archived: Study completed" style="text;html=1;strokeColor=none;fillColor=#fff8e1;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="600" y="520" width="280" height="120" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="80" width="60" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend1" value="Start/End" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579b;" vertex="1" parent="1">
          <mxGeometry x="50" y="120" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend2" value="Decision Point" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#e65100;" vertex="1" parent="1">
          <mxGeometry x="50" y="160" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend3" value="Process Step" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;" vertex="1" parent="1">
          <mxGeometry x="50" y="200" width="80" height="30" as="geometry" />
        </mxCell>
        

        
        <mxCell id="legend5" value="Success State" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#388e3c;" vertex="1" parent="1">
          <mxGeometry x="50" y="280" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend6" value="Info Box" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f8ff;strokeColor=#1976d2;" vertex="1" parent="1">
          <mxGeometry x="50" y="320" width="80" height="30" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile> 